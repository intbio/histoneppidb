<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	
	
	
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Histone PPI DB</title>
    <meta name="author" content="Anna Gribkova">
    <meta content="Histone Protein Protin Interactions Database" />
	<link rel="shortcut icon" href="/histoneppidb/images/favicon.ico">
    <!-- Bootstrap core CSS -->
	
	<link rel="stylesheet" type="text/css" href="DataTables/Bootstrap-3.3.7/css/bootstrap.min.css"/>	
	<link rel="stylesheet" type="text/css" href="DataTables/datatables.min.css"/> 
	<link rel="stylesheet" type="text/css" href="DataTables/SearchBuilder-1.0.0/css/searchBuilder.dataTables.min.css"/>
	<link rel="stylesheet" type="text/css" href="DataTables/Buttons-1.6.5/css/buttons.dataTables.min.css"/> 
	

	<link rel="stylesheet" type="text/css" href="css/cpe_db.css"/>



       
	
  </head>

  <body>



	<table class="table" cellpadding="50" cellspacing="0" border="0" style="padding-left:50pxl;text-align: center;width: 100pxl;">
        <tr>
            <td><img style="max-height: 150px;" src="images/logo.svg"></td>
            <td>
				<h3>Histone Protein Protein Interactions Database</h3>
				<h3>Description</h3>
						A database that collects publicly available datasets of experimental and predicted evidence about histone – non-histone
interactions from STRING, BioGRID, and IntAct. In DB are used both updated and previous
HGNC symbols for all human histone genes. Protein-protein interactions are aggregated for
histone variants. Also, DB contains a designed functional hierarchical classification for
chromatin proteins and PDB ID to the related structures.
This database contributes to revealing of a complex network of interactions between
nucleosomes and chromatin proteins, many of which are specific to the histone
composition of the nucleosome.

			
				<h3>Releases:</h3>
March 2021: HistonePPI DB version 1 (String v11, BioGRID v4.3., IntAct v 4.2.16??)

				<h3>Please cite Histone PPI DB:</h3>
Gribkova A. K., Shaytan A. K. Construction and analysis of an interactome between
nucleosomes and chromatin proteins // FEBS open bio. — 2019. — Vol. 9, no.
sup1. — P. 393–393.
			</td>

		</tr>
    </table>
<div class="row">
  <div class="col-md-5">

		<h3>Histone PPI DB Statistics:</h3>
<!-- 		<h3>Contributors:</h3>
		  <ul>
			  <li>Anna Gribkova — Compilation of data for the database, developer</li>
			  <li>Grigoriy Armeev — Technical Management</li>
		  </ul> -->
  </div>
</div>
      

      
      
    <div id='table-container'></div>
	<table id="histoneppitable" class="table table-striped table-bordered"  style="width:100%">
        <thead>
            <tr>
            	<th></th>
				<th>Histone variant</th>
				<th>Previous HGNC Symbol</th>
				<th>Interactor gene</th>
				<th>Interactor category</th>
				<th>PDBID</th>
				<th>BioGRID count</th>
				<th>IntAct count</th>
				<th>String count</th>
				<th>Score</th>
				<th>BioGRID_pubmed</th>
				<th>IntAct_pubmed</th>
				<th>combined_score</th>
				<th>Histone type</th>
				<th>PTM writers</th>
				<th>DNA modificators</th>
				<th>Transcription associated</th>
				<th>DNA repair</th>
				<th>HMG</th>
				<th>Histone chaperones</th>
				<th>TF</th>
				<th>Replication associated</th>
				<th>Chromatin remodelers</th>
				<th>Chromatin architecture</th>
				<th>PTM erasers</th>
				<th>PTM readers</th>
				<th>Other</th>

            </tr>
        </thead>
		<tfoot>
            <tr>
            	<th></th>
				<th>Histone variant</th>
				<th>Previous HGNC Symbol</th>
				<th>Interactor gene</th>
				<th>Interactor category</th>
				<th>PDBID</th>
				<th>BioGRID count</th>
				<th>IntAct count</th>
				<th>String count</th>
				<th>Score</th>
				<th>BioGRID_pubmed</th>
				<th>IntAct_pubmed</th>
				<th>combined_score</th>
				<th>Histone type</th>
				<th>PTM writers</th>
				<th>DNA modificators</th>
				<th>Transcription associated</th>
				<th>DNA repair</th>
				<th>HMG</th>
				<th>Histone chaperones</th>
				<th>TF</th>
				<th>Replication associated</th>
				<th>Chromatin remodelers</th>
				<th>Chromatin architecture</th>
				<th>PTM erasers</th>
				<th>PTM readers</th>
				<th>Other</th>
            </tr>
        </tfoot>
    </table>
    <div id="tooltip"></div>
    </div><!-- /.container -->



    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    
 
	<script type="text/javascript" src="DataTables/jQuery-3.3.1/jquery-3.3.1.min.js"></script>
	<script type="text/javascript" src="DataTables/Bootstrap-3.3.7/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="DataTables/datatables.min.js"></script>
	<!-- <script type="text/javascript" src="DataTables/SearchBuilder-1.0.0/js/datatables.searchBuilder.min.js"></script> -->
	<script type="text/javascript" src="DataTables/Buttons-1.6.5/js/dataTables.buttons.min.js"></script>
	<script type="text/javascript" src="js/smiles-drawer.min.js"></script>
	

    <script type="text/javascript">
	
	const copyToClipboard = str => {
	  const el = document.createElement('textarea');
	  el.value = str;
	  document.body.appendChild(el);
	  el.select();
	  document.execCommand('copy');
	  document.body.removeChild(el);
	};
	
	function format ( d ) {
    // `d` is the original data object for the row

	var genes = d['Previous HGNC Symbol'].split(',')
	var biogrid = d['BioGRID_pubmed'].split(',')
	var intact = d['IntAct_pubmed'].split(',')
	var string = d['combined_score'].split(',')
	
	var new_table ='<table class="table table-striped table-bordered" cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">'+
	     '<tr>'+ 
            '<td><b>Histone genes</b></td>'+
            '<td><b>reference(s) from BioGRID</b></td>'+
            '<td><b>reference(s) from IntAct</b></td>'+
            '<td><b>combined_score from String</b></td>'+
        '</tr>'
	for (let i = 0; i < genes.length; i++) {
		new_table+="<tr> "
    	new_table+='<td>'+ "<a href='https://www.genecards.org/cgi-bin/carddisp.pl?gene=" + genes[i]  + "' target='_blank'>" + genes[i] + "</a>"; + '</td>'

    	var biogrid_pubmed = biogrid[i].split(';')
    	var biogrid_l="<td>"
    	for (let k = 0; k < biogrid_pubmed.length; k++) {
    		if (isNaN(biogrid_pubmed[k])) {
    		}else{
    			biogrid_l+="<a href='https://pubmed.ncbi.nlm.nih.gov/" + biogrid_pubmed[k]  + "' target='_blank'>" + biogrid_pubmed[k] + "</a>, "
    		}
    	}
    	biogrid_l+='</td>'
    	new_table+=biogrid_l

    	var intact_pubmed = intact[i].split(';')
    	var intact_l ="<td>"
    	for (let k = 0; k < intact_pubmed.length; k++) {
    		if (isNaN(intact_pubmed[k])) {
    		}else{
    			intact_l+="<a href='https://pubmed.ncbi.nlm.nih.gov/" + intact_pubmed[k]  + "' target='_blank'>" + intact_pubmed[k] + "</a>, "
    		}
    	}
    	intact_l+='</td>'
    	new_table+=intact_l

    	if (isNaN(string[i])) {
    		new_table+='<td></td>';
    	}else{
    		new_table+='<td>'+ parseInt(string[i]) + '</td>';
    	}
    	new_table+= "</tr>"
    }
    new_table+= "</table>"



		
    return new_table
}
	let popup = new SmilesDrawer.Drawer({ width: 200, height: 200 });
	$(document).ready(function() {
	
	
    var table =$('#histoneppitable').DataTable( {
        "ajax": "data/db.json",
        "columns": [
			{
				className:      'details-control',
				orderable:      false,
				data:           null,
				defaultContent: ''
			},
			{ "data": "Histone variant" },
			{ "data": "Previous HGNC Symbol" },
			{ "data": "Interactor gene" },
			{ "data": "Interactor category" },
			{ "data": "PDBID" },
			{ "data": "BioGRID count" },
			{ "data": "IntAct count" },
			{ "data": "String count" },
			{ "data": "Score" },
			{ "data": "BioGRID_pubmed" },
			{ "data": "IntAct_pubmed" },
			{ "data": "combined_score" },
			{ "data": "Histone type" },
			{ "data": "PTM writers" },
			{ "data": "DNA modificators" },
			{ "data": "Transcription associated" },
			{ "data": "DNA repair" },
			{ "data": "HMG" },
			{ "data": "Histone chaperones" },
			{ "data": "TF" },
			{ "data": "Replication associated" },
			{ "data": "Chromatin remodelers" },
			{ "data": "Chromatin architecture" },
			{ "data": "PTM erasers" },
			{ "data": "PTM readers" },
			{ "data": "Other" },
        ],
		"aaSorting": [],
		"rowReorder": true,
		"paging": true,
		"pageLength": 100,
		"initComplete": function(settings, json) {
			$('[data-toggle="tooltip"]').tooltip({
			  class: "tooltip-main",
			  animation: true,
			  html: true,
			  delay: {show: 10, hide: 10},
			})
			$('[data-toggle="tooltip"]').on('shown.bs.tooltip', function () {
			    console.log(this.getAttribute('smiles'));
				var smiles=this.getAttribute('smiles');
				var id='tooltip_canvas_'+this.getAttribute('row');
				SmilesDrawer.parse(smiles, function (tree) {
					popup.draw(tree, id, 'light', false);
				}, function (err) {
					console.log(err);
				})
			})

		},
		"columnDefs": [ { "targets": '_all', "defaultContent": ""},
						{ orderable: true, className: 'reorder', targets: [1,2,3,5,6,7,8,9] },
						{ orderable: false, targets: '_all' },
						
												{
							targets: 1,
							render: function (data, type, row, meta)
							{		
								if (type === 'display')
									var hist_variant = row['Histone variant'].replace(/ /g, '_')
							        	var variants_dict = {
									'TS_H2A.1': 'H2A.1',
                             						'TS_H2B.1': 'H2B.1',
                             						'H2A.B.1': 'H2A.B',
                            						'H2A.B.2': 'H2A.B',
									     'H2A.B.3': 'H2A.B',
									     'H2A.Z.1': 'H2A.Z',
									     'H2A.Z.2': 'H2A.Z',
									     'H3.Y.1': 'H3.Y',
									     'H3.Y.2': 'H3.Y',
									     'macroH2A.1': 'macroH2A',
									     'macroH2A.2': 'macroH2A'}
			       
									var varints_l = ['cenH3', 'H1.0', 'TS_H1.7', 'OO_H1.8','H1.10',  'H2A.X', 'H3.3', 'H3.5', 'TS_H1.6','H2A.P']
									if (hist_variant in variants_dict ===true) or (hist_variant in varints_l ===true) {
									data = "<a href='https://histonedb.bioeng.ru/type/" + row['Histone type']  +"/variant/"+variants_dict[hist_variant]+"/#msa_div_browse" +"' target='_blank'>" + row['Histone variant'] + "</a>";
												}else{
			       						data = hist_variant }
								return data;
							}
						},


						{
							targets: 3,
							render: function (data, type, row, meta)
							{
								if (type === 'display')
									data = "<a href='https://www.genecards.org/cgi-bin/carddisp.pl?gene=" + data  + "' target='_blank'>" + data + "</a>";
								return data;
							}
						},

						{
							targets: 5,
							render: function (data, type, row, meta)
							{
								if (type === 'display')
									if (data!=null){
										
									
										var d = data.split(',')
										var links = ''

										for (let i = 0; i < d.length; i++) {
											links += "<a href='https://nucldb.intbio.org/structure/" + d[i]  + "' target='_blank'>" + d[i] + "</a>, ";
    									}

										}
									data = links
								return data;
							}
						},
						
						{
							targets: [6,7,8],
							render: function (data, type, row, meta)
							{
		

									var count_sum = data.split(',').reduce(function(a, b){
										return parseInt(a) + parseInt(b);
									}, 0);

									data = parseInt(count_sum);


								return data;
							}
							
						},
						{
							targets: [9],
							render: function (data, type, row, meta)
							{
								if (type === 'display'){
								
									var circle = `<div class="progress">
									  <div class="progress-bar" role="progressbar" style="width: ${data*100}%;" aria-valuenow="${data}" aria-valuemin="0" aria-valuemax="100">${data}</div>
									</div>`
									// console.log(data)

									return circle;}
								else
									{return data}
							}
							
						},



						


						{
							"targets": [2,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],
							"visible": false,
							"searchable": true
						}
					],
				dom: 'Blfr<"toolbar">itp',
				//dom: 'Blfritp',
				language: {
					searchBuilder: {
						button: 'Advanced Search (%d conditions)',
						title: 'Advanced Search'
					}
				},
				buttons: [
					'copy', 'csv',
					{
						extend: 'searchBuilder',
						config: {
						
							columns: [1,2,3,4,9]
						}
					}
				],
				
				

					
    
	} );


	
	$("div.toolbar").html('<div>Search by tag:</div>'+
							'<div class="btn-group btn-group-xs" id="tag_group">'+
							
							  '<label class="btn btn-info buttons-copy buttons-html5">'+
								'<input type="checkbox" name="PTM writers" id="tag1" autocomplete="off"> PTM writers'+
							  '</label>'+
							  
							  '<label class="btn btn-info buttons-copy buttons-html5">'+
								'<input type="checkbox" name="DNA modificators" id="tag2" autocomplete="off"> DNA modificators'+
							  '</label>'+
							  
							  '<label class="btn btn-info buttons-copy buttons-html5">'+
								'<input type="checkbox" name="Transcription associated" id="tag3" autocomplete="off" > Transcription associated'+
							  '</label>'+
							  
							  '<label class="btn btn-info buttons-copy buttons-html5">'+
								'<input type="checkbox" name="DNA repair" id="tag4" autocomplete="off" > DNA repair'+
							  '</label>'+
							  
							  '<label class="btn btn-info buttons-copy buttons-html5">'+
								'<input type="checkbox" name="HMG" id="tag5" autocomplete="off"> HMG'+
							  '</label>'+
							  
							  '<label class="btn btn-info buttons-copy buttons-html5">'+
								'<input type="checkbox" name="Histone chaperones" id="tag6" autocomplete="off"> Histone chaperones'+
							  '</label>'+
							  
							  '<label class="btn btn-info buttons-copy buttons-html5">'+
								'<input type="checkbox" name="TF" id="tag7" autocomplete="off"> TF'+
							  '</label>'+
							  '<label class="btn btn-info buttons-copy buttons-html5">'+
								'<input type="checkbox" name="Replication associated" id="tag8" autocomplete="off"> Replication associated'+
							  '</label>'+
							  '<label class="btn btn-info buttons-copy buttons-html5">'+
								'<input type="checkbox" name="Chromatin remodelers" id="tag9" autocomplete="off"> Chromatin remodelers'+
							  '</label>'+
							  '<label class="btn btn-info buttons-copy buttons-html5">'+
								'<input type="checkbox" name="Chromatin architecture" id="tag10" autocomplete="off"> Chromatin architecture'+
							  '</label>'+
							  '<label class="btn btn-info buttons-copy buttons-html5">'+
								'<input type="checkbox" name="PTM erasers" id="tag11" autocomplete="off"> PTM erasers'+
							  '</label>'+
							  '<label class="btn btn-info buttons-copy buttons-html5">'+
								'<input type="checkbox" name="PTM readers" id="tag12" autocomplete="off"> PTM readers'+
							  '</label>'+
							  '<label class="btn btn-info buttons-copy buttons-html5">'+
								'<input type="checkbox" name="Other" id="tag13" autocomplete="off"> Other (not classified)'+
							  '</label>'+
							'</div>');
							

	



	$('#histoneppitable tbody').on('click', 'td.details-control', function () {
        var tr = $(this).closest('tr');
        var row = table.row( tr );
 
        if ( row.child.isShown() ) {
            // This row is already open - close it
            row.child.hide();
            tr.removeClass('shown');
        }
        else {
            // Open this row
            row.child( format(row.data()) ).show();
			SmilesDrawer.apply({
								width: 300,
								height: 200,}
							  );
            tr.addClass('shown');
        }
    } );
	
	
	$('input:checkbox').change( function() {
        table.draw();
    } );
	
} );

$.fn.dataTable.ext.search.push(
    function( settings, data, dataIndex ) {
        var tag1 =  data[14]  ;
		var tag2 =  data[15]  ;
		var tag3 =  data[16]  ;
		var tag4 =  data[17]  ;
		var tag5 =  data[18]  ;
		var tag6 =  data[19]  ;
		var tag7 =  data[20]  ;
		var tag8 =  data[21]  ;
		var tag9 =  data[22]  ;
		var tag10 =  data[23]  ;
		var tag11 =  data[24]  ;
		var tag12 =  data[25]  ;
		var tag13 =  data[26]  ;
		var tag1_state=$('#tag1')[0].checked;
		var tag2_state=$('#tag2')[0].checked;
		var tag3_state=$('#tag3')[0].checked;
		var tag4_state=$('#tag4')[0].checked;
		var tag5_state=$('#tag5')[0].checked;
		var tag6_state=$('#tag6')[0].checked;
		var tag7_state=$('#tag7')[0].checked;
		var tag8_state=$('#tag8')[0].checked;
		var tag9_state=$('#tag9')[0].checked;
		var tag10_state=$('#tag10')[0].checked;
		var tag11_state=$('#tag11')[0].checked;
		var tag12_state=$('#tag12')[0].checked;
		var tag13_state=$('#tag13')[0].checked;
        if (  (((tag1!='') & tag1_state ) == tag1_state) &
			  (((tag2!='') & tag2_state ) == tag2_state) &
			  (((tag3!='') & tag3_state ) == tag3_state) &
			  (((tag4!='') & tag4_state ) == tag4_state) &
			  (((tag5!='') & tag5_state ) == tag5_state) &
			  (((tag6!='') & tag6_state ) == tag6_state) &
			  (((tag7!='') & tag7_state ) == tag7_state) &
			  (((tag8!='') & tag8_state ) == tag8_state) &
			  (((tag9!='') & tag9_state ) == tag9_state) &
			  (((tag10!='') & tag10_state ) == tag10_state) &
			  (((tag11!='') & tag11_state ) == tag11_state) &
			  (((tag12!='') & tag12_state ) == tag12_state) &
			  (((tag13!='') & tag13_state ) == tag13_state)) 
        {	
			
            return true;
        }
        return false;
    }
);


	
    </script>
  </body>
</html>
